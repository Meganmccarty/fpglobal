{% extends "base.html" %}
{% load static %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-newsindexpage{% endblock %}

{% block content %}

{% for post in newspages %}
        {% with post=post.specific %}
            <h2>{{ post.title }}</h2>
            <p class="meta">By {{ post.author }} | Published {{ post.date }}</p>
            {% with post.main_image as main_image %}
                {% if main_image %}
                    {% image main_image fill-160x100 %}
                {% endif %}
            {% endwith %}

            {{ post.body|richtext | truncatewords_html:75}}

            <a href="{% pageurl post %}">
                <button class="styled-button">Read More &rarr;</button>
            </a>
        {% endwith %}
    {% endfor %}

{{ page.body|richtext }}

{% endblock %}